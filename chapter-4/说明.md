# chapter-4

## 4-1

**tee 命令是从标准输入中读取数据，直至文件结尾，随后将数据写入标准输出和命令行
参数所指定的文件。（44.7 节讨论 FIFO 时，会展示使用 tee 命令的一个例子。）请使用
I/O 系统调用实现 tee 命令。默认情况下，若已存在与命令行参数指定文件同名的文件，
tee 命令会将其覆盖。如文件已存在，请实现-a 命令行选项（tee-a file）在文件结尾处
追加数据。（请参考附录 B 中对 getopt()函数的描述来解析命令行选项。）**

当我看到问题描述的时候，我就思考了一个问题：如果文件路径出现在-a之前，那么当重名的时候是追加还是覆盖呢？后来经过简单测试，发现无论在-a选项前后都是追加写。也就是说，只要出现了-a，无论出现在哪个位置，重名文件都会是追加写。

这也让想出了第一种获得文件路径的方法，就是遍历argv数组，如果是-a则跳过，不是就调用open。但是这样子的话，getopt中的optind就完全没用到。为了熟悉getopt，我最终并没有采用这一种实现方式。

我最终的实现方法没有考虑到文件路径出现在-a之前的情况。

我觉得tee命令实现中最关键的是要定义一个fd数组，用来记录需要输出的文件。然后根据是否有-a，选择不同的打开方式即可。

## 4-2

这道题需要结合到后面的知识，我等学习到了相关知识后再来做。
